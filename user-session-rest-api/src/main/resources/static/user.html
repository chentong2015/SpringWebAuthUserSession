<!DOCTYPE html>
<html>
   <body>
      <h1>User Testing Page</h1>
      Username: <input name="username" id="username" type="text"/>
      <button type="button" id="ShowMeInfo">Show Me</button>
      <br><br>
      <button type="button" id="WhoamiInfo">Whoami</button><br><br><br>

      New Password: <input name="newPassword" id="newPassword" type="password"/> * <br><br>
      Confirm Password: <input name="confirmPassword" id="confirmPassword" type="password"/> * <br><br>
      <button type="button" id="UpdatePassword">Update Password</button> <br><br><br>

      <button type="button" id="LogoutUser">Log Out</button><br><br><br>

      <p>Visit Public Secure Web Page</p>
      <button type="button" onclick="window.location.href='public-secure.html'">
         Public Space
      </button>

      <script src="js/functions.js"></script>
      <script>
         <!-- TODO. encodeURIComponent() 防止用户名中包含特殊字符破坏URL结构, 导致请求出错或数据解析失败 -->
         var showMeInfoButton = document.getElementById("ShowMeInfo");
         showMeInfoButton.addEventListener("click", function (e) {
             const name = document.getElementById("username").value;
             const url = 'http://localhost:8080/api/showme/' + encodeURIComponent(name);
             makeGetRequest(url, "ShowMe");
         });

         var whoamiInfoButton = document.getElementById("WhoamiInfo");
         whoamiInfoButton.addEventListener("click", function (e) {
             const url = 'http://localhost:8080/api/whoami';
             makeGetRequest(url, "Whoami");
         });

         var updatePasswordButton = document.getElementById("UpdatePassword");
         updatePasswordButton.addEventListener("click", handleChangePassword);

         var logoutUserButton = document.getElementById("LogoutUser");
         logoutUserButton.addEventListener("click", handleLogoutClick);
      </script>
   </body>
</html>